<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–†–µ–∑—é–º–µ A4</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #3f51b5;
      --text-color: #333;
      --bg-color: #ffffff;
      --card-bg: #f5f5f5;
      --border-radius: 8px;
      --box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto', Arial, sans-serif;
      font-size: 12px;
      line-height: 1.4;
      color: var(--text-color);
      background-color: var(--bg-color);
    }

    .a4-page {
      width: 210mm;
      height: 297mm;
      margin: 0 auto;
      padding: 10mm;
      box-sizing: border-box;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 8px;
    }

    .profile-header {
      display: grid;
      grid-template-columns: 30mm 1fr;
      gap: 10px;
      margin-bottom: 5px;
    }

    .profile-photo {
      width: 30mm;
      height: 30mm;
      border-radius: 50%;
      overflow: hidden;
      position: relative;
      border: 2px solid var(--primary-color);
    }

    .profile-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-info h1 {
      margin: 0;
      font-size: 18px;
      color: var(--primary-color);
    }

    .profile-info p {
      margin: 2px 0 0;
      font-size: 14px;
    }

    .resume-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto auto;
      gap: 8px;
      height: calc(297mm - 65mm);
    }

    .resume-card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 8px;
      box-shadow: var(--box-shadow);
      overflow: hidden;
      position: relative;
    }

    .resume-card h2 {
      font-size: 14px;
      margin: 0 0 5px 0;
      color: var(--primary-color);
      border-bottom: 1px solid var(--primary-color);
      padding-bottom: 3px;
    }

    /* –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã */
    .experience-item {
      margin-bottom: 6px;
      position: relative;
    }

    .experience-item h3 {
      font-size: 12px;
      margin: 0;
      display: flex;
      justify-content: space-between;
    }

    .experience-item p {
      margin: 2px 0;
      font-size: 11px;
    }

    /* –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ */
    .education-item {
      margin-bottom: 6px;
      position: relative;
    }

    .education-item h3 {
      font-size: 12px;
      margin: 0;
      display: flex;
      justify-content: space-between;
    }

    /* –ù–∞–≤—ã–∫–∏ –∏ —è–∑—ã–∫–∏ */
    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .tag {
      background-color: var(--primary-color);
      color: white;
      padding: 2px 6px;
      border-radius: 10px;
      font-size: 10px;
      position: relative;
      overflow: hidden;
    }

    /* –ö–æ–Ω—Ç–∞–∫—Ç—ã */
    .contact-item {
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 11px;
    }

    /* –ö–Ω–æ–ø–∫–∏ */
    .add-btn {
      background: rgba(63, 81, 181, 0.1);
      border: 1px dashed var(--primary-color);
      color: var(--primary-color);
      padding: 2px 5px;
      border-radius: 4px;
      font-size: 10px;
      cursor: pointer;
      margin-top: 5px;
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }

    .controls {
      display: flex;
      justify-content: center;
      margin-top: 5px;
    }

    .download-btn {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    /* Material Wave —ç—Ñ—Ñ–µ–∫—Ç */
    .wave {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.4);
      border-radius: 50%;
      transform: scale(0);
      pointer-events: none;
      opacity: 1;
    }

    .wave.active {
      animation: wave 0.6s ease-out;
    }

    @keyframes wave {
      0% { transform: scale(0); opacity: 1; }
      100% { transform: scale(2); opacity: 0; }
    }

    .clickable {
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="a4-page">
    <div class="profile-header">
      <div class="profile-photo clickable" id="photoUpload">
        <img id="profileImage" src="https://via.placeholder.com/150" alt="–§–æ—Ç–æ">
        <div class="wave"></div>
        <input type="file" id="photoInput" accept="image/*" style="display: none;">
      </div>
      <div class="profile-info">
        <h1 contenteditable="true">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</h1>
        <p contenteditable="true">–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</p>
      </div>
    </div>

    <div class="resume-grid">
      <!-- 1 —Å—Ç—Ä–æ–∫–∞: –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã -->
      <div class="resume-card">
        <h2><i class="fas fa-briefcase"></i> –û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</h2>
        <div id="experienceContainer">
          <div class="experience-item" contenteditable="true">
            <h3>–°—Ç–∞—Ä—à–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ <span>2020 - –Ω.–≤.</span></h3>
            <p>–¢–µ—Ö–Ω–æ–ö–∞–±, –ú–æ—Å–∫–≤–∞</p>
            <p>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥–æ–π</p>
            <div class="wave"></div>
          </div>
          <div class="experience-item" contenteditable="true">
            <h3>–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ <span>2017 - 2020</span></h3>
            <p>–î–∏–∑–∞–π–Ω–°—Ç—É–¥–∏—è, –°–ü–±</p>
            <p>–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö —Å–∞–π—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏</p>
            <div class="wave"></div>
          </div>
        </div>
        <button class="add-btn" id="addExperience"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –æ–ø—ã—Ç</button>
      </div>

      <!-- 1 —Å—Ç—Ä–æ–∫–∞: –ù–∞–≤—ã–∫–∏ -->
      <div class="resume-card">
        <h2><i class="fas fa-tools"></i> –ù–∞–≤—ã–∫–∏</h2>
        <div class="tags-container" id="skillsContainer">
          <span class="tag clickable" contenteditable="true">HTML/CSS<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">JavaScript<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">React<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">Node.js<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">Git<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">Figma<div class="wave"></div></span>
        </div>
        <button class="add-btn" id="addSkill"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤—ã–∫</button>
      </div>

      <!-- 2 —Å—Ç—Ä–æ–∫–∞: –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ -->
      <div class="resume-card">
        <h2><i class="fas fa-graduation-cap"></i> –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h2>
        <div id="educationContainer">
          <div class="education-item" contenteditable="true">
            <h3>–ú–∞–≥–∏—Å—Ç—Ä –ö–ù <span>2014 - 2018</span></h3>
            <p>–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —Ç–µ—Ö. —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</p>
            <p>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –í–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</p>
            <div class="wave"></div>
          </div>
        </div>
        <button class="add-btn" id="addEducation"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</button>
      </div>

      <!-- 2 —Å—Ç—Ä–æ–∫–∞: –Ø–∑—ã–∫–∏ -->
      <div class="resume-card">
        <h2><i class="fas fa-language"></i> –Ø–∑—ã–∫–∏</h2>
        <div id="languagesContainer">
          <div class="education-item" contenteditable="true">
            <p>üá∑üá∫ –†—É—Å—Å–∫–∏–π (—Ä–æ–¥–Ω–æ–π)</p>
            <p>üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (B2)</p>
            <div class="wave"></div>
          </div>
        </div>
        <button class="add-btn" id="addLanguage"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —è–∑—ã–∫</button>
      </div>

      <!-- 3 —Å—Ç—Ä–æ–∫–∞: –ò–Ω—Ç–µ—Ä–µ—Å—ã -->
      <div class="resume-card">
        <h2><i class="fas fa-heart"></i> –ò–Ω—Ç–µ—Ä–µ—Å—ã</h2>
        <div class="tags-container" id="interestsContainer">
          <span class="tag clickable" contenteditable="true">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è<div class="wave"></div></span>
          <span class="tag clickable" contenteditable="true">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è<div class="wave"></div></span>
        </div>
        <button class="add-btn" id="addInterest"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å</button>
      </div>

      <!-- 3 —Å—Ç—Ä–æ–∫–∞: –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
      <div class="resume-card">
        <h2><i class="fas fa-envelope"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <div id="contactsContainer">
          <div class="contact-item clickable" contenteditable="true">
            <i class="fas fa-phone"></i> +7 (123) 456-78-90
            <div class="wave"></div>
          </div>
          <div class="contact-item clickable" contenteditable="true">
            <i class="fas fa-envelope"></i> ivanov@example.com
            <div class="wave"></div>
          </div>
          <div class="contact-item clickable" contenteditable="true">
            <i class="fab fa-github"></i> github.com/username
            <div class="wave"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="download-btn clickable" id="downloadBtn">
        <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å PDF
        <div class="wave"></div>
      </button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Material Wave —ç—Ñ—Ñ–µ–∫—Ç
      function createWaveEffect(event) {
        const rect = this.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        
        const wave = this.querySelector('.wave');
        if (!wave) return;
        
        wave.style.left = `${x}px`;
        wave.style.top = `${y}px`;
        
        wave.classList.remove('active');
        void wave.offsetWidth;
        wave.classList.add('active');
      }

      // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∫–æ –≤—Å–µ–º –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
      document.querySelectorAll('.clickable, .tag, [contenteditable="true"]').forEach(el => {
        el.addEventListener('click', createWaveEffect);
      });

      // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
      const photoUpload = document.getElementById('photoUpload');
      const photoInput = document.getElementById('photoInput');
      const profileImage = document.getElementById('profileImage');

      photoUpload.addEventListener('click', function() {
        photoInput.click();
      });

      photoInput.addEventListener('change', function(e) {
        if (e.target.files && e.target.files[0]) {
          const reader = new FileReader();
          reader.onload = function(event) {
            profileImage.src = event.target.result;
            localStorage.setItem('profileImage', event.target.result);
          };
          reader.readAsDataURL(e.target.files[0]);
        }
      });

      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–æ—Ç–æ
      if (localStorage.getItem('profileImage')) {
        profileImage.src = localStorage.getItem('profileImage');
      }

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã
      document.getElementById('addExperience').addEventListener('click', function() {
        const container = document.getElementById('experienceContainer');
        const newItem = document.createElement('div');
        newItem.className = 'experience-item';
        newItem.setAttribute('contenteditable', 'true');
        newItem.innerHTML = `
          <h3>–î–æ–ª–∂–Ω–æ—Å—Ç—å <span>–ì–ì–ì–ì - –ì–ì–ì–ì</span></h3>
          <p>–ö–æ–º–ø–∞–Ω–∏—è, –ì–æ—Ä–æ–¥</p>
          <p>–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</p>
          <div class="wave"></div>
        `;
        container.appendChild(newItem);
        newItem.querySelector('.wave').addEventListener('click', createWaveEffect);
      });

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–∞–≤—ã–∫–∞
      document.getElementById('addSkill').addEventListener('click', function() {
        const container = document.getElementById('skillsContainer');
        const newItem = document.createElement('span');
        newItem.className = 'tag clickable';
        newItem.setAttribute('contenteditable', 'true');
        newItem.innerHTML = '–ù–æ–≤—ã–π –Ω–∞–≤—ã–∫<div class="wave"></div>';
        container.appendChild(newItem);
        newItem.querySelector('.wave').addEventListener('click', createWaveEffect);
      });

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
      document.getElementById('addEducation').addEventListener('click', function() {
        const container = document.getElementById('educationContainer');
        const newItem = document.createElement('div');
        newItem.className = 'education-item';
        newItem.setAttribute('contenteditable', 'true');
        newItem.innerHTML = `
          <h3>–°—Ç–µ–ø–µ–Ω—å <span>–ì–ì–ì–ì - –ì–ì–ì–ì</span></h3>
          <p>–£—á–µ–±–Ω–æ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ</p>
          <p>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</p>
          <div class="wave"></div>
        `;
        container.appendChild(newItem);
        newItem.querySelector('.wave').addEventListener('click', createWaveEffect);
      });

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞
      document.getElementById('addLanguage').addEventListener('click', function() {
        const container = document.getElementById('languagesContainer');
        const newItem = document.createElement('div');
        newItem.className = 'education-item';
        newItem.setAttribute('contenteditable', 'true');
        newItem.innerHTML = `
          <p>üá∫üá∏ –Ø–∑—ã–∫ (—É—Ä–æ–≤–µ–Ω—å)</p>
          <div class="wave"></div>
        `;
        container.appendChild(newItem);
        newItem.querySelector('.wave').addEventListener('click', createWaveEffect);
      });

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞
      document.getElementById('addInterest').addEventListener('click', function() {
        const container = document.getElementById('interestsContainer');
        const newItem = document.createElement('span');
        newItem.className = 'tag clickable';
        newItem.setAttribute('contenteditable', 'true');
        newItem.innerHTML = '–ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–µ—Å<div class="wave"></div>';
        container.appendChild(newItem);
        newItem.querySelector('.wave').addEventListener('click', createWaveEffect);
      });

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
      const editableElements = document.querySelectorAll('[contenteditable="true"]');
      editableElements.forEach(el => {
        el.addEventListener('input', function() {
          localStorage.setItem('resumeData', document.querySelector('.a4-page').innerHTML);
        });
      });

      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
      if (localStorage.getItem('resumeData')) {
        document.querySelector('.a4-page').innerHTML = localStorage.getItem('resumeData');
      }

      // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF
      document.getElementById('downloadBtn').addEventListener('click', function() {
        const element = document.querySelector('.a4-page');
        const opt = {
          margin: 0,
          filename: '—Ä–µ–∑—é–º–µ.pdf',
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { 
            scale: 2,
            logging: false,
            useCORS: true
          },
          jsPDF: { 
            unit: 'mm',
            format: 'a4',
            orientation: 'portrait'
          }
        };

        // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π PDF
        const buttons = element.querySelectorAll('button');
        buttons.forEach(btn => btn.style.display = 'none');

        html2pdf().set(opt).from(element).save().then(() => {
          // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
          buttons.forEach(btn => btn.style.display = '');
        });
      });
    });
  </script>
</body>
</html>
